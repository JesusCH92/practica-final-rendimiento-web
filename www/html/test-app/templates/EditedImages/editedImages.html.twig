{% extends 'base.html.twig' %}

{% block stylesheets %} {{ parent() }} {% endblock %}

{% block body %}
    {{ dump(imagesCollection[0]) }}
    {{ dump(imagesCollection[0]['image_rename']) }}
    <div class="row container-images bg-light">
        <div class="card-group">
            {% for image in imagesCollection %}
            <div class="col-xl-4 col-md-6 col-10 mx-auto my-3">
                <div class="card">
                    <img class="card-img-top" src="/assets/files/{{image['image_rename']}}.{{image['image_extension']}}" alt="Card image cap">
                    <div id="accordion-{{ loop.index }}">

                        <div class="card">
                            <button class="btn text-white metadata-image" data-toggle="collapse" data-target="#image-tag-{{ loop.index }}" aria-expanded="true" aria-controls="image-tag-{{ loop.index }}">
                                Add a new tag
                            </button>
                            <div id="image-tag-{{ loop.index }}" class="collapse" aria-labelledby="headingOne" data-parent="#accordion-{{ loop.index }}">
                                <div class="card-body">
                                    <div class="tags-container" id="tags-container-{{ loop.index }}" name-photo="{{ image.image_rename }}">
                                        {% for tag in image.tags %}
                                            <span class="badge badge-light">{{ tag }} 
                                                <div class="delete-tag"></div>
                                            </span>
                                        {% endfor %}
                                    </div>
                                    <div class="input-group tags-container-controller" name-photo="{{ image.image_rename }}">
                                        <input type="text" class="form-control" placeholder="Add a new tag..." id="input-tag-{{ loop.index }}">
                                        <div class="input-group-append add-tag-btn" id="add-tag-btn-{{ loop.index }}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <button class="btn text-white metadata-image" data-toggle="collapse" data-target="#image-description-{{ loop.index }}" aria-expanded="false" aria-controls="image-description-{{ loop.index }}">
                            Add a description
                            </button>
                            <div id="image-description-{{ loop.index }}" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion-{{ loop.index }}">
                                <div class="card-body">
                                    <div class="description-container" id="tags-container-{{ loop.index }}" name-photo="{{ image.image_rename }}">
                                        <textarea class="form-control" rows="2" readonly>{{ image.description }}</textarea>
                                    </div>
                                    <div class="input-group description-container-controller" name-photo="{{ image.image_rename }}">
                                        <textarea type="text" class="form-control custom-control" rows="2" placeholder="Add a description..." id="input-description-{{ loop.index }}"></textarea>
                                        <div class="input-group-addon add-description-btn" id="add-description-btn-{{ loop.index }}">
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            {% endfor %}
        </div>


    </div>
{% endblock %}

{% block head_js %}
    {{ parent() }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="/assets/js/EditImageModule.js"></script>

{% endblock %}